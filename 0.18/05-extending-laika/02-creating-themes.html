<!DOCTYPE html>
<html lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="generator" content="Laika 0.18.1 + Helium Theme" />
    <title>Creating Themes</title>
    
    
      <meta name="description" content="Site and E-book Generator and Customizable Text Markup Transformer for sbt, Scala and Scala.js"/>
    
    
      <link rel="icon" sizes="32x32" type="image/png" href="../../img/site/laika-favicon.png"/>
    
    
      <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lato:400,700">
    
      <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/tonsky/FiraCode@1.207/distr/fira_code.css">
    
    <link rel="stylesheet" type="text/css" href="../helium/icofont.min.css" />
    <link rel="stylesheet" type="text/css" href="../helium/laika-helium.css" />
    <link rel="stylesheet" type="text/css" href="../css/manual.css" />
    <script src="../helium/laika-helium.js"></script>
    <script src="../helium/laika-versions.js"></script>
    <script>initVersions("../../", "/05-extending-laika/02-creating-themes.html", "0.18");</script>
    
    <script> /* for avoiding page load transitions */ </script>
  </head>

  <body>

    <header id="top-bar">

      <div class="row">
        <a id="nav-icon">
          <i class="icofont-laika" title="Navigation">&#xefa2;</i>
        </a>
        
        <div id="version-menu-container">
          <a id="version-menu-toggle" class="text-link drop-down-toggle" href="#">
            
            Version 0.18
            
          </a>
          <nav id="version-menu">
            <ul id="version-list" class="nav-list">
            </ul>
          </nav>
        </div>
        
      </div>
  
      <a class="icon-link" href="../../index.html"><i class="icofont-laika" title="Home">&#xef47;</i></a>
      
      <span class="row links"><a class="icon-link svg-link" href="https://github.com/planet42/Laika"><span title="Source Code"><svg class="svg-icon" width="100%" height="100%" viewBox="0 0 100 100" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xml:space="preserve" xmlns:serif="http://www.serif.com/" style="fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2;">
  <g class="svg-shape">
    <path d="M49.995,1c-27.609,-0 -49.995,22.386 -49.995,50.002c-0,22.09 14.325,40.83 34.194,47.444c2.501,0.458 3.413,-1.086 3.413,-2.412c0,-1.185 -0.043,-4.331 -0.067,-8.503c-13.908,3.021 -16.843,-6.704 -16.843,-6.704c-2.274,-5.773 -5.552,-7.311 -5.552,-7.311c-4.54,-3.103 0.344,-3.042 0.344,-3.042c5.018,0.356 7.658,5.154 7.658,5.154c4.46,7.64 11.704,5.433 14.552,4.156c0.454,-3.232 1.744,-5.436 3.174,-6.685c-11.102,-1.262 -22.775,-5.553 -22.775,-24.713c-0,-5.457 1.949,-9.92 5.147,-13.416c-0.516,-1.265 -2.231,-6.348 0.488,-13.233c0,0 4.199,-1.344 13.751,5.126c3.988,-1.108 8.266,-1.663 12.518,-1.682c4.245,0.019 8.523,0.574 12.517,1.682c9.546,-6.47 13.736,-5.126 13.736,-5.126c2.728,6.885 1.013,11.968 0.497,13.233c3.204,3.496 5.141,7.959 5.141,13.416c0,19.209 -11.691,23.436 -22.83,24.673c1.795,1.544 3.394,4.595 3.394,9.26c0,6.682 -0.061,12.076 -0.061,13.715c0,1.338 0.899,2.894 3.438,2.406c19.853,-6.627 34.166,-25.354 34.166,-47.438c-0,-27.616 -22.389,-50.002 -50.005,-50.002"/>
  </g>
</svg></span></a><a class="icon-link svg-link" href="../api/laika/api/index.html"><span title="API"><svg class="svg-icon" width="100%" height="100%" viewBox="0 0 100 100" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xml:space="preserve" xmlns:serif="http://www.serif.com/" style="fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2;">
  <g class="svg-shape">
    <path d="M75,47.5c13.246,0 24,10.754 24,24c0,13.246 -10.754,24 -24,24c-13.246,0 -24,-10.754 -24,-24c0,-13.246 10.754,-24 24,-24Zm-50,-0c13.246,-0 24,10.754 24,24c0,13.246 -10.754,24 -24,24c-13.246,-0 -24,-10.754 -24,-24c0,-13.246 10.754,-24 24,-24Zm2.705,16.735l7.239,0l0.622,-4.904l-21.833,0l-0,4.904l7.589,0l0,22.067l6.383,0l-0,-22.067Zm58.076,7.265c-0,-8.757 -3.698,-14.166 -10.781,-14.166c-7.083,-0 -10.781,5.604 -10.781,14.166c0,8.757 3.698,14.166 10.781,14.166c7.083,0 10.781,-5.604 10.781,-14.166Zm-6.539,0c0,6.538 -1.128,9.496 -4.242,9.496c-2.997,0 -4.242,-2.88 -4.242,-9.496c-0,-6.616 1.206,-9.496 4.242,-9.496c3.036,-0 4.242,2.88 4.242,9.496Zm-29.242,-67c13.246,0 24,10.754 24,24c0,13.246 -10.754,24 -24,24c-13.246,0 -24,-10.754 -24,-24c0,-13.246 10.754,-24 24,-24Zm0.512,9.834c-7.122,-0 -12.609,5.098 -12.609,14.127c-0,9.263 5.215,14.205 12.532,14.205c4.164,0 7.083,-1.634 9.068,-3.658l-2.88,-3.697c-1.518,1.206 -3.153,2.413 -5.838,2.413c-3.697,-0 -6.266,-2.763 -6.266,-9.263c-0,-6.616 2.724,-9.379 6.149,-9.379c2.102,-0 3.892,0.778 5.371,1.984l3.113,-3.775c-2.257,-1.868 -4.748,-2.957 -8.64,-2.957Z"/>
  </g>
</svg></span></a><a class="icon-link" href="../downloads.html"><i class="icofont-laika" title="Download">&#xef08;</i></a><a class="icon-link" href="http://planet42.org"><i class="icofont-laika" title="Demo">&#xeeea;</i></a></span>
      
    </header>

    <nav id="sidebar">

      <div class="row">
        <a class="icon-link svg-link" href="https://github.com/planet42/Laika"><span title="Source Code"><svg class="svg-icon" width="100%" height="100%" viewBox="0 0 100 100" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xml:space="preserve" xmlns:serif="http://www.serif.com/" style="fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2;">
  <g class="svg-shape">
    <path d="M49.995,1c-27.609,-0 -49.995,22.386 -49.995,50.002c-0,22.09 14.325,40.83 34.194,47.444c2.501,0.458 3.413,-1.086 3.413,-2.412c0,-1.185 -0.043,-4.331 -0.067,-8.503c-13.908,3.021 -16.843,-6.704 -16.843,-6.704c-2.274,-5.773 -5.552,-7.311 -5.552,-7.311c-4.54,-3.103 0.344,-3.042 0.344,-3.042c5.018,0.356 7.658,5.154 7.658,5.154c4.46,7.64 11.704,5.433 14.552,4.156c0.454,-3.232 1.744,-5.436 3.174,-6.685c-11.102,-1.262 -22.775,-5.553 -22.775,-24.713c-0,-5.457 1.949,-9.92 5.147,-13.416c-0.516,-1.265 -2.231,-6.348 0.488,-13.233c0,0 4.199,-1.344 13.751,5.126c3.988,-1.108 8.266,-1.663 12.518,-1.682c4.245,0.019 8.523,0.574 12.517,1.682c9.546,-6.47 13.736,-5.126 13.736,-5.126c2.728,6.885 1.013,11.968 0.497,13.233c3.204,3.496 5.141,7.959 5.141,13.416c0,19.209 -11.691,23.436 -22.83,24.673c1.795,1.544 3.394,4.595 3.394,9.26c0,6.682 -0.061,12.076 -0.061,13.715c0,1.338 0.899,2.894 3.438,2.406c19.853,-6.627 34.166,-25.354 34.166,-47.438c-0,-27.616 -22.389,-50.002 -50.005,-50.002"/>
  </g>
</svg></span></a><a class="icon-link svg-link" href="../api/laika/api/index.html"><span title="API"><svg class="svg-icon" width="100%" height="100%" viewBox="0 0 100 100" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xml:space="preserve" xmlns:serif="http://www.serif.com/" style="fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2;">
  <g class="svg-shape">
    <path d="M75,47.5c13.246,0 24,10.754 24,24c0,13.246 -10.754,24 -24,24c-13.246,0 -24,-10.754 -24,-24c0,-13.246 10.754,-24 24,-24Zm-50,-0c13.246,-0 24,10.754 24,24c0,13.246 -10.754,24 -24,24c-13.246,-0 -24,-10.754 -24,-24c0,-13.246 10.754,-24 24,-24Zm2.705,16.735l7.239,0l0.622,-4.904l-21.833,0l-0,4.904l7.589,0l0,22.067l6.383,0l-0,-22.067Zm58.076,7.265c-0,-8.757 -3.698,-14.166 -10.781,-14.166c-7.083,-0 -10.781,5.604 -10.781,14.166c0,8.757 3.698,14.166 10.781,14.166c7.083,0 10.781,-5.604 10.781,-14.166Zm-6.539,0c0,6.538 -1.128,9.496 -4.242,9.496c-2.997,0 -4.242,-2.88 -4.242,-9.496c-0,-6.616 1.206,-9.496 4.242,-9.496c3.036,-0 4.242,2.88 4.242,9.496Zm-29.242,-67c13.246,0 24,10.754 24,24c0,13.246 -10.754,24 -24,24c-13.246,0 -24,-10.754 -24,-24c0,-13.246 10.754,-24 24,-24Zm0.512,9.834c-7.122,-0 -12.609,5.098 -12.609,14.127c-0,9.263 5.215,14.205 12.532,14.205c4.164,0 7.083,-1.634 9.068,-3.658l-2.88,-3.697c-1.518,1.206 -3.153,2.413 -5.838,2.413c-3.697,-0 -6.266,-2.763 -6.266,-9.263c-0,-6.616 2.724,-9.379 6.149,-9.379c2.102,-0 3.892,0.778 5.371,1.984l3.113,-3.775c-2.257,-1.868 -4.748,-2.957 -8.64,-2.957Z"/>
  </g>
</svg></span></a><a class="icon-link" href="../downloads.html"><i class="icofont-laika" title="Download">&#xef08;</i></a><a class="icon-link" href="http://planet42.org"><i class="icofont-laika" title="Demo">&#xeeea;</i></a>
      </div>
      
      <ul class="nav-list">
        <li class="level1"><a href="../table-of-content.html">Table of Content</a></li>
        <li class="level1"><a href="../downloads.html">Documentation Downloads</a></li>
        <li class="level1 nav-header">About Laika</li>
        <li class="level2"><a href="../01-about-laika/01-features.html">Features</a></li>
        <li class="level2"><a href="../01-about-laika/02-design-goals.html">Design Goals</a></li>
        <li class="level1 nav-header">Running Laika</li>
        <li class="level2"><a href="../02-running-laika/01-sbt-plugin.html">sbt Plugin</a></li>
        <li class="level2"><a href="../02-running-laika/02-library-api.html">Library API</a></li>
        <li class="level2"><a href="../02-running-laika/03-configuration.html">Configuration</a></li>
        <li class="level1 nav-header">Preparing Content</li>
        <li class="level2"><a href="../03-preparing-content/01-directory-structure.html">Directory Structure</a></li>
        <li class="level2"><a href="../03-preparing-content/02-navigation.html">Navigation</a></li>
        <li class="level2"><a href="../03-preparing-content/03-theme-settings.html">Theme Settings</a></li>
        <li class="level2"><a href="../03-preparing-content/04-ebooks.html">E-Books (EPUB &amp; PDF)</a></li>
        <li class="level2"><a href="../03-preparing-content/05-syntax-highlighting.html">Syntax Highlighting</a></li>
        <li class="level1 nav-header">Customizing Laika</li>
        <li class="level2"><a href="../04-customizing-laika/01-overview.html">Customizing Laika - Overview</a></li>
        <li class="level2"><a href="../04-customizing-laika/03-creating-templates.html">Creating Templates</a></li>
        <li class="level2"><a href="../04-customizing-laika/04-document-ast.html">The Document AST</a></li>
        <li class="level2"><a href="../04-customizing-laika/05-ast-rewriting.html">AST Rewriting</a></li>
        <li class="level2"><a href="../04-customizing-laika/06-overriding-renderers.html">Overriding Renderers</a></li>
        <li class="level1 nav-header">Extending Laika</li>
        <li class="level2"><a href="01-overview.html">Extending Laika - Overview</a></li>
        <li class="level2 active"><a href="#">Creating Themes</a></li>
        <li class="level2"><a href="03-implementing-directives.html">Implementing Directives</a></li>
        <li class="level2"><a href="04-writing-parser-extensions.html">Writing Parser Extensions</a></li>
        <li class="level2"><a href="06-adding-syntax-highlighters.html">Adding Syntax Highlighters</a></li>
        <li class="level2"><a href="07-new-markup-output-formats.html">New Markup or Output Formats</a></li>
        <li class="level1 nav-header">Sub-Modules</li>
        <li class="level2"><a href="../06-sub-modules/02-laikas-parser-combinators.html">Laika&#39;s Parser Combinators</a></li>
        <li class="level2"><a href="../06-sub-modules/03-laikas-hocon-api.html">Laika&#39;s HOCON API</a></li>
        <li class="level1 nav-header">Reference</li>
        <li class="level2"><a href="../07-reference/01-standard-directives.html">Standard Directives</a></li>
        <li class="level2"><a href="../07-reference/02-substitution-variables.html">Substitution Variables</a></li>
        <li class="level2"><a href="../07-reference/03-spec-compliance.html">Spec Compliance</a></li>
        <li class="level2"><a href="../07-reference/06-release-notes.html">Release Notes</a></li>
        <li class="level2"><a href="../07-reference/07-migration-guide.html">Migration Guide</a></li>
        <li class="level1"><a href="../../olderVersions/index.html">Older Versions</a></li>
      </ul>
      
    </nav>

    <div id="container">

      <nav id="page-nav">
        <p class="header"><a href="#">Creating Themes</a></p>
        
        <ul class="nav-list">
          <li class="level1"><a href="#the-theme-trait">The Theme Trait</a></li>
          <li class="level1"><a href="#designing-a-configuration-api">Designing a Configuration API</a></li>
          <li class="level1"><a href="#generating-or-loading-documents">Generating or Loading Documents</a></li>
          <li class="level2"><a href="#templates">Templates</a></li>
          <li class="level2"><a href="#generating-configuration-for-templates">Generating Configuration for Templates</a></li>
          <li class="level2"><a href="#css">CSS</a></li>
          <li class="level2"><a href="#fonts">Fonts</a></li>
          <li class="level1"><a href="#constructing-a-theme-instance">Constructing a Theme Instance</a></li>
          <li class="level1"><a href="#publishing-a-theme">Publishing a Theme</a></li>
        </ul>
        
        <p class="footer"><a href="https://github.com/planet42/Laika/tree/master/docs/05-extending-laika/02-creating-themes.md"><i class="icofont-laika" title="Edit">&#xef10;</i>Source for this page</a></p>
      </nav>

      <main class="content">

        <h1 id="creating-themes" class="title">Creating Themes</h1>
        <p>Creating your own theme is a way to build an alternative for Laika&#39;s default theme called Helium in cases
        where its feature set or look and feel is not meeting your requirements.</p>
        <p>The effort of designing and implementing a theme is justified if you plan to re-use it across multiple projects,
        either as an in-house library or published as Open Source for the entire community.</p>
        <p>If you just want to create a custom design for a single project, it&#39;s easier to just install an empty theme
        and simply place all necessary templates and CSS files in your regular input directory.</p>
        <div class="tab-container" data-tab-group="config">
          <ul class="tab-group">
            <li class="tab active" data-choice-name="sbt"><a href="#">sbt Plugin</a></li>
            <li class="tab" data-choice-name="library"><a href="#">Library API</a></li>
          </ul>
          <div class="tab-content active" data-choice-name="sbt">
            <pre><code class="nohighlight"><span class="identifier">laikaTheme</span><span> := </span><span class="type-name">Theme</span><span>.</span><span class="identifier">empty</span></code></pre>
          </div>
          <div class="tab-content" data-choice-name="library">
            <pre><code class="nohighlight"><span class="keyword">val</span><span> </span><span class="identifier">transformer</span><span> = </span><span class="type-name">Transformer</span><span>
  .</span><span class="identifier">from</span><span>(</span><span class="type-name">Markdown</span><span>)
  .</span><span class="identifier">to</span><span>(</span><span class="type-name">HTML</span><span>)
  .</span><span class="identifier">parallel</span><span>[</span><span class="type-name">IO</span><span>]
  .</span><span class="identifier">witTheme</span><span>(</span><span class="type-name">Theme</span><span>.</span><span class="identifier">empty</span><span>)
  .</span><span class="identifier">build</span></code></pre>
          </div>
        </div>
        
        <h2 id="the-theme-trait" class="section">The Theme Trait<a class="anchor-link right" href="#the-theme-trait"><i class="icofont-laika">&#xef71;</i></a></h2>
        <p>Before describing the typical steps for implementing a theme, let&#39;s have a quick look at the (simple) <code>Theme</code> trait,
        to get an idea of what a theme represents in technical terms.</p>
        <pre><code class="nohighlight"><span class="keyword">trait</span><span> </span><span class="type-name">Theme</span><span>[</span><span class="type-name">F</span><span>[</span><span class="identifier">_</span><span>]] {

  </span><span class="keyword">def</span><span> </span><span class="declaration-name">inputs</span><span>: </span><span class="type-name">InputTree</span><span>[</span><span class="type-name">F</span><span>]
  
  </span><span class="keyword">def</span><span> </span><span class="declaration-name">extensions</span><span>: </span><span class="type-name">Seq</span><span>[</span><span class="type-name">ExtensionBundle</span><span>]
  
  </span><span class="keyword">def</span><span> </span><span class="declaration-name">treeProcessor</span><span>: </span><span class="type-name">Format</span><span> =&gt; </span><span class="type-name">TreeProcessor</span><span>[</span><span class="type-name">F</span><span>]
  
}

</span><span class="keyword">object</span><span> </span><span class="type-name">Theme</span><span> {

  </span><span class="keyword">type</span><span> </span><span class="type-name">TreeProcessor</span><span>[</span><span class="type-name">F</span><span>[</span><span class="identifier">_</span><span>]] = </span><span class="type-name">Kleisli</span><span>[</span><span class="type-name">F</span><span>, </span><span class="type-name">ParsedTree</span><span>[</span><span class="type-name">F</span><span>], </span><span class="type-name">ParsedTree</span><span>[</span><span class="type-name">F</span><span>]]
  
}</span></code></pre>
        <p>The <code>inputs</code> property is the most important aspect of the trait, as it allows to pre-populate the input tree
        with templates and styles. 
        See <a href="#generating-or-loading-documents">Generating or Loading Documents</a> below for details.</p>
        <p>The <code>extensions</code> property enables theme authors to &quot;auto-install&quot; one or more extension bundles that are required
        for the theme&#39;s feature set.
        For simple themes this collection may be empty.
        You can use any existing 3rd-party bundle or create your own.</p>
        <p>For example the default Helium theme uses this option to install a few custom renderers 
        that deal with UI aspects not covered by Laika Core, like decorating callouts with one of Helium&#39;s icons. </p>
        <p>Bundles are not covered in this chapter as this extension point is documented in <a href="01-overview.html#the-extensionbundle-api">The ExtensionBundle API</a>.</p>
        <p>A bundle that is automatically installed as part of the theme should be essential for the theme to function.
        If it is opt-in, your library should make it available separately so that the user can mix and match. </p>
        <p>Finally, the <code>treeProcessor</code> property is another optional hook that allows to inspect and modify the document AST
        between parsing and rendering.
        This can be useful if some of your theme&#39;s configuration logic needs to look at the input documents or configuration
        supplied by the user before generating the final AST.
        It is a function that expects the output format, so you can create separate logic for producing the AST for the
        site, EPUB and PDF output.</p>
        
        <h2 id="designing-a-configuration-api" class="section">Designing a Configuration API<a class="anchor-link right" href="#designing-a-configuration-api"><i class="icofont-laika">&#xef71;</i></a></h2>
        <p>Every theme should have a configuration API that allows to tweak the look and feel or add metadata or custom links.
        It&#39;s usually the only public API of your library to reduce the likeliness of issues with binary compatibility.</p>
        <p>You can have a look at Helium&#39;s API documented in <a href="../03-preparing-content/03-theme-settings.html#theme-settings">Theme Settings</a> for inspiration.
        Such an API usually covers some or all of the following aspects:</p>
        <ul>
          <li>Configure font resources for embedding</li>
          <li>Tweak colors, font sizes, line height and layout of the pages</li>
          <li>Define metadata like language, authors, description</li>
          <li>Configure special pages like table of contents, download or landing pages</li>
          <li>Add custom links to navigation bars</li>
          <li>Specify cover images for EPUB and PDF documents</li>
        </ul>
        <p>The package <code>laika.theme</code> contains a few base types that you can reuse for defining some common types:</p>
        <ul>
          <li>The <code>Color</code> type gives you the <code>hex</code> and <code>rgb</code> methods for defining colors.</li>
          <li><code>LengthUnit</code> offers constructors for all length units permitted in CSS, e.g. <code>px(12)</code> or <code>em(1.5)</code>.</li>
          <li>The <code>FontDefinition</code> type allows to define fonts for embedding. 
          Adding these instances to the final base configuration will trigger the embedding in EPUB and PDF documents
          without any further implementation within your theme.</li>
        </ul>
        <p>Another aspect users might appreciate is if you allow to define most options separately per output format.
        Users might pick a more colorful design for the site for example, but switch to a more black-and-white feel
        for the PDF output so that the content looks good when printed.</p>
        <p>The Helium API solves this by requiring a selector in front of all configuration methods which is either
        <code>all</code>, <code>site</code>, <code>epub</code> or <code>pdf</code>:</p>
        <pre class="keep-together pdf epub"><code class="nohighlight"><span class="keyword">val</span><span> </span><span class="identifier">theme</span><span> = </span><span class="type-name">Helium</span><span>.</span><span class="identifier">defaults</span><span>
  .</span><span class="identifier">all</span><span>.</span><span class="identifier">metadata</span><span>(
    </span><span class="identifier">title</span><span> = </span><span class="type-name">Some</span><span>(</span><span class="string-literal">&quot;Project Name&quot;</span><span>),
    </span><span class="identifier">language</span><span> = </span><span class="type-name">Some</span><span>(</span><span class="string-literal">&quot;de&quot;</span><span>),
  )
  .</span><span class="identifier">epub</span><span>.</span><span class="identifier">navigationDepth</span><span>(</span><span class="number-literal">4</span><span>)
  .</span><span class="identifier">pdf</span><span>.</span><span class="identifier">navigationDepth</span><span>(</span><span class="number-literal">4</span><span>)
  .</span><span class="identifier">build</span></code></pre>
        
        <h2 id="generating-or-loading-documents" class="section">Generating or Loading Documents<a class="anchor-link right" href="#generating-or-loading-documents"><i class="icofont-laika">&#xef71;</i></a></h2>
        <p>The one aspect probably all theme implementations are dealing with is to pre-populate the input tree with 
        default templates and styles.
        For this you can use the same <code>InputTree</code> API that users can use if they need full flexibility for defining
        their inputs.</p>
        <div class="callout warning">
          <i class="icofont-laika">&#xf026;</i>
          <p>While Laika offers the full API as for user inputs for maximum flexibility and consistency, 
          it is recommended to avoid any file system resources by using <code>addFile</code> or <code>addDirectory</code>.</p>
          <p>This might be acceptable for a library shared in-house where you can rely on a specific project setup,
          but for a public library it is most convenient for users when the theme is just an additional dependency
          and does not require any additional setup.</p>
        </div>
        
        <h3 id="templates" class="section">Templates<a class="anchor-link right" href="#templates"><i class="icofont-laika">&#xef71;</i></a></h3>
        <p>Each theme supporting the three major output formats (site, EPUB, PDF) would come with at least three template
        documents: one default template for each format.
        Additionally a theme can provide opt-in templates that users can explicitly select in the configuration header
        of a markup document with (<code>laika.template = /&lt;theme-dir&gt;/&lt;name&gt;-template.html)</code>), where <code>theme-dir</code> is the
        directory your theme files are generated into.</p>
        <p>There are two approaches you can choose from:</p>
        <ul>
          <li>
            <p>Generate the entire template as an in-memory string based on the user&#39;s theme configuration and 
            add the result to the <code>InputTreeBuilder</code>:</p>
            <pre class="keep-together pdf epub"><code class="nohighlight"><span class="keyword">val</span><span> </span><span class="identifier">builder</span><span>: </span><span class="type-name">InputTreeBuilder</span><span>[</span><span class="type-name">F</span><span>] = ???
</span><span class="keyword">val</span><span> </span><span class="identifier">templateString</span><span>: </span><span class="type-name">String</span><span> = </span><span class="type-name">MyTemplateGenerator</span><span>.</span><span class="identifier">generate</span><span>(</span><span class="identifier">config</span><span>)
</span><span class="identifier">builder</span><span>.</span><span class="identifier">addString</span><span>(</span><span class="identifier">templateString</span><span>, </span><span class="type-name">DefaultTemplatePath</span><span>.</span><span class="identifier">forHTML</span><span>)</span></code></pre>
            <p>This might be quite convenient to implement, but has the disadvantage that the user does not have a way
            to look at the default template in case she wants to place a modified copy into the input tree.</p>
          </li>
          <li>
            <p>Or place the entire default template into the resource folder of your library and load it from there:</p>
            <pre class="keep-together pdf epub"><code class="nohighlight"><span class="keyword">val</span><span> </span><span class="identifier">builder</span><span>: </span><span class="type-name">InputTreeBuilder</span><span>[</span><span class="type-name">F</span><span>] = ???
</span><span class="keyword">val</span><span> </span><span class="identifier">resourcePath</span><span> = </span><span class="string-literal">&quot;my-theme/templates/default.template.html&quot;</span><span>
</span><span class="identifier">builder</span><span>.</span><span class="identifier">addClasspathResource</span><span>(</span><span class="identifier">resourcePath</span><span>, </span><span class="type-name">DefaultTemplatePath</span><span>.</span><span class="identifier">forHTML</span><span>)</span></code></pre>
            <p>In this case you would use Laika&#39;s template syntax to access your theme&#39;s configuration, 
            usually mostly by using the following features:</p>
            <ul>
              <li>
                <p>HOCON substitution references in the form of <code>${myTheme.site.fontFamilies}</code>.
                For details see <a href="#generating-configuration-for-templates">Generating Configuration for Templates</a> below.</p>
              </li>
              <li>
                <p>Laika directives, <code>@:for</code> to loop over content placed into the configuration and <code>@:if</code> for
                conditionally including content.</p>
              </li>
            </ul>
            <p>In this approach your documentation can point to the source of the template in your repository,
            making it easier for the user to use a modified copy if required.</p>
            <p>For details on the supported template syntax, see <a href="../04-customizing-laika/03-creating-templates.html#creating-templates">Creating Templates</a>.</p>
          </li>
        </ul>
        
        <h3 id="generating-configuration-for-templates" class="section">Generating Configuration for Templates<a class="anchor-link right" href="#generating-configuration-for-templates"><i class="icofont-laika">&#xef71;</i></a></h3>
        <p>When using the second approach described in the section above where you use directives and substitution references
        inside your templates, the base configuration for the transformer needs to be pre-populated with all the corresponding
        values.</p>
        <p>This can be achieved using Laika&#39;s <code>ConfigBuilder</code> API which allows to programmatically construct <code>Config</code> instances,
        which are normally obtained by parsing HOCON.
        The builder accepts all the types supported in JSON/HOCON, e.g. Strings, Numbers, Arrays and Objects,
        but also, as a Laika extension, the inclusion of AST nodes.</p>
        <p>Using AST nodes has the advantage that you do not have to pre-render the output for all formats.
        If it is a node type supported by Laika Core it is already known to all renderers, 
        allowing you to reduce the boilerplate and stringly logic of rendering the format directly.</p>
        <p>The below example shows how the <code>ThemeBuilder</code> API can be used to pre-populate the transformer configuration:</p>
        <pre class="keep-together pdf epub"><code class="nohighlight"><span class="keyword">val</span><span> </span><span class="identifier">logo</span><span> = </span><span class="type-name">Logo</span><span>.</span><span class="identifier">internal</span><span>(
  </span><span class="identifier">path</span><span> = </span><span class="type-name">Root</span><span> / </span><span class="string-literal">&quot;logo.png&quot;</span><span>, 
  </span><span class="identifier">alt</span><span> = </span><span class="type-name">Some</span><span>(</span><span class="string-literal">&quot;Project Logo&quot;</span><span>)
)

</span><span class="keyword">val</span><span> </span><span class="identifier">baseConfig</span><span> = </span><span class="type-name">ConfigBuilder</span><span>.</span><span class="identifier">empty</span><span>
  .</span><span class="identifier">withValue</span><span>(</span><span class="string-literal">&quot;theme-name.logo&quot;</span><span>, </span><span class="identifier">logo</span><span>)
  .</span><span class="identifier">build</span><span>

</span><span class="type-name">ThemeBuilder</span><span>(</span><span class="string-literal">&quot;Theme Name&quot;</span><span>)
  .</span><span class="identifier">addBaseConfig</span><span>(</span><span class="identifier">baseConfig</span><span>)
  .</span><span class="identifier">build</span></code></pre>
        <p>It defines a logo AST element, based on the virtual path <code>Root / &quot;logo.png&quot;</code> and associates it with the key
        <code>theme-name.logo</code>.
        Finally it passes the configuration to the theme builder, making the logo available for templates via a
        substitution reference (<code>${theme-name.logo}</code>).</p>
        <p>The indirection via the configuration key means that even if the user customizes the default templates
        of the theme you created, these references can still be used by the end user.</p>
        <p>Of course the above example is a minimal excerpt of a typical theme builder, which would normally add more
        keys to the configuration and also use the theme builder to pre-populate templates and styles.</p>
        
        <h3 id="css" class="section">CSS<a class="anchor-link right" href="#css"><i class="icofont-laika">&#xef71;</i></a></h3>
        <p>The second content type you would most likely include is CSS generated based on user configuration.
        Here the most convenient approach might be to place static CSS files into the resource folder of your library,
        and use CSS variables to capture all aspects which the user can configure. 
        This is the approach that Helium has also chosen.</p>
        <pre class="keep-together pdf epub"><code class="nohighlight"><span class="keyword">val</span><span> </span><span class="identifier">builder</span><span>: </span><span class="type-name">InputTreeBuilder</span><span>[</span><span class="type-name">F</span><span>] = ???
</span><span class="keyword">val</span><span> </span><span class="identifier">resourcePath</span><span> = </span><span class="string-literal">&quot;my-theme/css/theme.css&quot;</span><span>
</span><span class="keyword">val</span><span> </span><span class="identifier">vars</span><span>: </span><span class="type-name">String</span><span> = </span><span class="type-name">MyCSSVarsGenerator</span><span>.</span><span class="identifier">generate</span><span>(</span><span class="identifier">config</span><span>)
</span><span class="identifier">builder</span><span>
  .</span><span class="identifier">addString</span><span>(</span><span class="identifier">vars</span><span>, </span><span class="type-name">Root</span><span> / </span><span class="string-literal">&quot;my-theme&quot;</span><span> / </span><span class="string-literal">&quot;vars.css&quot;</span><span>)
  .</span><span class="identifier">addClasspathResource</span><span>(</span><span class="identifier">resourcePath</span><span>, </span><span class="type-name">Root</span><span> / </span><span class="string-literal">&quot;my-theme&quot;</span><span> / </span><span class="string-literal">&quot;theme.css&quot;</span><span>)</span></code></pre>
        
        <h3 id="fonts" class="section">Fonts<a class="anchor-link right" href="#fonts"><i class="icofont-laika">&#xef71;</i></a></h3>
        <p>If a theme supports EPUB or PDF output, it would be convenient for the user if a theme includes a set of default fonts.
        Otherwise PDF output would always be based on the few standard fonts that are available for every PDF generator,
        which might be somewhat limiting stylistically.</p>
        <p>Ensure that the fonts your are using have a license that allows for redistribution as part of a library.
        Beware that some web fonts might allow linking the font in websites for free, but not embedding them into 
        EPUB or PDF documents.
        Ideally the license should also not require the users of the theme to add an attribution to each page.</p>
        <p>When including font defaults for convenience, the theme&#39;s configuration API should always allow for their replacement.
        The API should accept a sequence of <code>FontDefinition</code> instances that define the fonts to be embedded.</p>
        <p>These definitions can then be passed to the base configuration of the theme (which will be merged with the 
        user configuration):</p>
        <pre class="keep-together pdf epub"><code class="nohighlight"><span class="keyword">val</span><span> </span><span class="identifier">fonts</span><span>: </span><span class="type-name">Seq</span><span>[</span><span class="type-name">FontDefinition</span><span>] = ???
</span><span class="keyword">val</span><span> </span><span class="identifier">baseConfig</span><span> = </span><span class="type-name">ConfigBuilder</span><span>.</span><span class="identifier">empty</span><span>
  .</span><span class="identifier">withValue</span><span>(</span><span class="string-literal">&quot;laika.epub.fonts&quot;</span><span>, </span><span class="identifier">fonts</span><span>)
  .</span><span class="identifier">withValue</span><span>(</span><span class="string-literal">&quot;laika.pdf.fonts&quot;</span><span>, </span><span class="identifier">fonts</span><span>)
  .</span><span class="identifier">build</span><span>
  
</span><span class="type-name">ThemeBuilder</span><span>(</span><span class="string-literal">&quot;Theme Name&quot;</span><span>)
  .</span><span class="identifier">addBaseConfig</span><span>(</span><span class="identifier">baseConfig</span><span>)
  .</span><span class="identifier">build</span></code></pre>
        <p>Of course, like with Laika&#39;s default Helium theme, you can allow to define different fonts for EPUB and PDF.</p>
        
        
        <h2 id="constructing-a-theme-instance" class="section">Constructing a Theme Instance<a class="anchor-link right" href="#constructing-a-theme-instance"><i class="icofont-laika">&#xef71;</i></a></h2>
        <p>Finally all the templates, styles, configuration and fonts that you gather from the user&#39;s theme configuration
        or from your defaults if omitted, need to be assembled into a theme provider instance.</p>
        <p>This step will be very different for each theme depending on its feature set, 
        so we just show Laika&#39;s own Helium theme builder as an example:</p>
        <pre><code class="nohighlight"><span class="keyword">class</span><span> </span><span class="type-name">HeliumThemeBuilder</span><span> (</span><span class="identifier">helium</span><span>: </span><span class="type-name">Helium</span><span>) </span><span class="keyword">extends</span><span> </span><span class="type-name">ThemeProvider</span><span> {

  </span><span class="keyword">def</span><span> </span><span class="declaration-name">build</span><span>[</span><span class="type-name">F</span><span>[</span><span class="identifier">_</span><span>]: </span><span class="type-name">Sync</span><span>]: </span><span class="type-name">Resource</span><span>[</span><span class="type-name">F</span><span>, </span><span class="type-name">Theme</span><span>[</span><span class="type-name">F</span><span>]] = {

    </span><span class="keyword">import</span><span> </span><span class="identifier">helium</span><span>.</span><span class="identifier">_</span><span>

    </span><span class="keyword">val</span><span> </span><span class="identifier">treeProcessor</span><span> = </span><span class="keyword">new</span><span> </span><span class="type-name">HeliumTreeProcessor</span><span>[</span><span class="type-name">F</span><span>](</span><span class="identifier">helium</span><span>)
    </span><span class="keyword">val</span><span> </span><span class="identifier">htmlOverrides</span><span> = </span><span class="type-name">HeliumRenderOverrides</span><span>
                          .</span><span class="identifier">forHTML</span><span>(</span><span class="identifier">siteSettings</span><span>.</span><span class="identifier">layout</span><span>.</span><span class="identifier">anchorPlacement</span><span>)

    </span><span class="type-name">ThemeBuilder</span><span>(</span><span class="string-literal">&quot;Helium&quot;</span><span>)
      .</span><span class="identifier">addInputs</span><span>(</span><span class="type-name">HeliumInputBuilder</span><span>.</span><span class="identifier">build</span><span>(</span><span class="identifier">helium</span><span>))
      .</span><span class="identifier">addBaseConfig</span><span>(</span><span class="type-name">ConfigGenerator</span><span>.</span><span class="identifier">populateConfig</span><span>(</span><span class="identifier">helium</span><span>))
      .</span><span class="identifier">addRewriteRules</span><span>(</span><span class="type-name">HeliumRewriteRules</span><span>.</span><span class="identifier">build</span><span>(</span><span class="identifier">helium</span><span>))
      .</span><span class="identifier">addRenderOverrides</span><span>(</span><span class="type-name">HTML</span><span>.</span><span class="type-name">Overrides</span><span>(</span><span class="identifier">htmlOverrides</span><span>))
      .</span><span class="identifier">addRenderOverrides</span><span>(</span><span class="type-name">XSLFO</span><span>.</span><span class="type-name">Overrides</span><span>(</span><span class="type-name">HeliumRenderOverrides</span><span>.</span><span class="identifier">forPDF</span><span>))
      .</span><span class="identifier">processTree</span><span>(</span><span class="identifier">treeProcessor</span><span>.</span><span class="identifier">forHTML</span><span>, </span><span class="type-name">HTML</span><span>)
      .</span><span class="identifier">processTree</span><span>(</span><span class="identifier">treeProcessor</span><span>.</span><span class="identifier">forAllFormats</span><span>)
      .</span><span class="identifier">build</span><span>

  }
}</span></code></pre>
        <p>As you can see, it is a very tiny class as it delegates to various other builders to properly separate concerns.
        Let&#39;s just highlight the most important aspects:</p>
        <ul>
          <li>
            <p>Your theme builder must implement <code>ThemeProvider</code> as that is ultimately the type that can be passed
            to the library&#39;s transformer API or to the <code>laikaTheme</code> sbt setting.
            An instance of this type is what the final call to <code>build</code> in your configuration API should produce.</p>
          </li>
          <li>
            <p>The <code>build</code> method will be invoked by Laika when the transformer resource is created.
            It passes in the effect type as it is in the hand of the end user to select the concrete implementation,
            any implementation of <code>cats.Sync</code> is supported.</p>
          </li>
          <li>
            <p>The <code>ThemeBuilder</code> is an optional API, but usually recommended as it reduces boilerplate.
            The only requirement is that the <code>build</code> method returns a cats-effect <code>Resource[F, Theme[F]]</code>.
            In the case of Helium, you can see that the API is used to: </p>
            <p>a) Pre-populate the input tree with documents (templates, styles, JavaScript) via <code>addInputs</code>,
               as described in <a href="#generating-or-loading-documents">Generating or Loading Documents</a> above.</p>
            <p>b) Pre-populate the transformer configuration (e.g. with text or AST nodes that can be referenced in templates)
               via <code>addBaseConfig</code> as shown in <a href="#generating-configuration-for-templates">Generating Configuration for Templates</a> above.</p>
            <p>c) Customize the rendering of some AST nodes with theme-specific features via <code>addRenderOverrides</code>.
               In Helium this is used for rendering tabs for user-selectable content, anchors for copying section links,
               and for adding custom icons to callouts.
               See <a href="../04-customizing-laika/06-overriding-renderers.html#overriding-renderers">Overriding Renderers</a> for details.</p>
            <p>d) Add AST rewrite rules via <code>addRewriteRules</code>, which is somewhat more low-level and allows to remove or swap
               AST nodes between parsing and rendering.
               See <a href="../04-customizing-laika/05-ast-rewriting.html#ast-rewriting">AST Rewriting</a> for details on this topic.</p>
            <p>e) Finally, it adds or removes additional documents via <code>processTree</code> which allows for a final modification
               of the document tree per output format, e.g. to remove a JavaScript file that your theme from the EPUB
               output which is only intended for websites.</p>
          </li>
        </ul>
        
        <h2 id="publishing-a-theme" class="section">Publishing a Theme<a class="anchor-link right" href="#publishing-a-theme"><i class="icofont-laika">&#xef71;</i></a></h2>
        <p>Since a theme is just a dependency, you can publish it like any other library.</p>
        <p>As a minimum set of documentation it&#39;s recommended to include:</p>
        <ul>
          <li>
            <p>Listing all licenses, both the one you are using for the theme implementation as well as potentially
            3rd-party licenses for any font or icon resources you might include.</p>
          </li>
          <li>
            <p>Document the supported output formats.
            Ideally themes support Laika&#39;s main target formats, HTML, EPUB and PDF, 
            but if you want to focus on fewer or different formats, let your users know.</p>
          </li>
          <li>
            <p>Document the compatible Laika versions.
            Laika is still in the 0.x version range, so some breaking changes are still expected before reaching the 1.0 milestone.
            But the big rewrite phases are a thing of the past now, so you won&#39;t be exposed to massive disruptions.
            A 1.0 version is expected at some point after the 0.18 or 0.19 releases.</p>
          </li>
          <li>
            <p>Document your theme configuration API.</p>
          </li>
        </ul>
        <p>Finally, let us know about your theme! We are happy to add links and short descriptions to Laika&#39;s documentation,
        so that users know which 3rd-party alternatives exist.</p>

      </main>

    </div>

  </body>
</html>